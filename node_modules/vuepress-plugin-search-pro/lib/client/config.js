import{usePageData as x,useRouteLocale as D,useSiteLocaleData as K,defineClientConfig as N}from"vuepress/client";import{startsWith as P,useLocaleConfig as g}from"@vuepress/helper/client";import{useDebounceFn as U,useEventListener as w,useScrollLock as j,onClickOutside as H}from"@vueuse/core";import{ref as h,computed as E,watch as m,provide as R,onMounted as k,onUnmounted as M,defineComponent as T,inject as A,h as o,shallowRef as L,nextTick as F,defineAsyncComponent as W}from"vue";import{checkIsMacOS as Y,checkIsIOS as $,checkIsiPad as B,useIsMobile as V}from"vuepress-shared/client";import{c as _,C as q,S as z}from"./closeIcon-3ghKBQ2r.js";import{d as I,e as O,u as Q,c as X,s as G,a as f,i as J}from"./index-DuYfQ8Y8.js";import"./styles/search-box.scss";import"./styles/search-modal.scss";const Z=(e,s=!1)=>{const l=h(0),r=E(()=>e.value[l.value]),a=()=>{l.value=l.value>0?l.value-1:e.value.length-1},n=()=>{l.value=l.value<e.value.length-1?l.value+1:0};return m(e,()=>{s||(l.value=0)}),{index:l,item:r,prev:a,next:n}},ee=e=>e instanceof Element?document.activeElement===e&&(["TEXTAREA","SELECT","INPUT"].includes(e.tagName)||e.hasAttribute("contenteditable")):!1,ae=e=>I.some(s=>{const{key:l,ctrl:r=!1,shift:a=!1,alt:n=!1,meta:u=!1}=s;return l===e.key&&r===e.ctrlKey&&a===e.shiftKey&&n===e.altKey&&u===e.metaKey}),oe='<svg width="15" height="15" aria-label="Enter key" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M12 3.53088v3c0 1-1 2-2 2H4M7 11.53088l-3-3 3-3"></path></g></svg>',te='<svg width="15" height="15" aria-label="Arrow down" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M7.5 3.5v8M10.5 8.5l-3 3-3-3"></path></g></svg>',le='<svg width="15" height="15" aria-label="Arrow up" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M7.5 11.5v-8M10.5 6.5l-3-3-3 3"></path></g></svg>',re='<svg width="15" height="15" aria-label="Escape key" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M13.6167 8.936c-.1065.3583-.6883.962-1.4875.962-.7993 0-1.653-.9165-1.653-2.1258v-.5678c0-1.2548.7896-2.1016 1.653-2.1016.8634 0 1.3601.4778 1.4875 1.0724M9 6c-.1352-.4735-.7506-.9219-1.46-.8972-.7092.0246-1.344.57-1.344 1.2166s.4198.8812 1.3445.9805C8.465 7.3992 8.968 7.9337 9 8.5c.032.5663-.454 1.398-1.4595 1.398C6.6593 9.898 6 9 5.963 8.4851m-1.4748.5368c-.2635.5941-.8099.876-1.5443.876s-1.7073-.6248-1.7073-2.204v-.4603c0-1.0416.721-2.131 1.7073-2.131.9864 0 1.6425 1.031 1.5443 2.2492h-2.956"></path></g></svg>',y=Symbol(__VUEPRESS_DEV__?"search-pro":""),se=()=>{const e=h(!1);R(y,e)},ne=e=>{const s=h([]);if(O){const l=Q(),r=x(),a=D();k(()=>{const{suggest:n,terminate:u}=X(),p=U(v=>{v?n(v,a.value,l.value).then(c=>l.value.suggestionsFilter?.(c,v,a.value,r.value)??c).then(c=>{s.value=c.length?P(c[0],v)&&!c[0].slice(v.length).includes(" ")?c:[v,...c]:[]}).catch(c=>{console.error(c)}):s.value=[]},G.suggestDelay);m([e,a],()=>p(e.value),{immediate:!0}),M(()=>{u()})})}return{suggestions:s}},b=I[0];var ce=T({name:"SearchBox",setup(){const e=g(f),s=A(y),l=h(!1),r=E(()=>b?[(l.value?["⌃","⇧","⌥","⌘"]:["Ctrl","Shift","Alt","Win"]).filter((a,n)=>b[["ctrl","shift","alt","meta"][n]]),b.key.toUpperCase()]:null);return w("keydown",a=>{!s.value&&ae(a)&&!ee(a.target)&&(a.preventDefault(),s.value=!0)}),k(()=>{const{userAgent:a}=navigator;l.value=Y(a)||$(a)||B(a)}),()=>[o("button",{type:"button",class:"search-pro-button","aria-label":e.value.search,onClick:()=>{s.value=!0}},[o(_),o("div",{class:"search-pro-placeholder"},e.value.search),r.value?o("div",{class:"search-pro-key-hints"},r.value.map(a=>o("kbd",{class:"search-pro-key"},a))):null])]}});const ue=W({loader:()=>import("vuepress-plugin-search-pro/result"),loadingComponent:()=>{const e=g(f);return o(z,{hint:e.value.loading})}});var ie=T({name:"SearchModal",setup(){const e=A(y),s=K(),l=V(),r=g(f),a=h(""),{suggestions:n}=ne(a),u=h(!1),{index:p,prev:v,next:c}=Z(n),C=L(),S=L(),d=(t=p.value)=>{a.value=n.value[t],u.value=!1};return w("keydown",t=>{u.value?t.key==="ArrowUp"?v():t.key==="ArrowDown"?c():t.key==="Enter"?d():t.key==="Escape"&&(u.value=!1):t.key==="Escape"&&(e.value=!1)}),k(()=>{const t=j(document.body);m(e,async i=>{t.value=i,i&&(await F(),C.value?.focus())}),H(S,()=>{u.value=!1}),M(()=>{t.value=!1})}),()=>e.value?o("div",{class:"search-pro-modal-wrapper"},[o("div",{class:"search-pro-mask",onClick:()=>{e.value=!1,a.value=""}}),o("div",{class:"search-pro-modal"},[o("div",{class:"search-pro-box"},[o("form",[o("label",{for:"search-pro","aria-label":r.value.search},o(_)),o("input",{ref:C,type:"search",class:"search-pro-input",id:"search-pro",placeholder:r.value.placeholder,spellcheck:"false",autocapitalize:"off",autocomplete:"off",autocorrect:"off",name:`${s.value.title}-search`,value:a.value,"aria-controls":"search-pro-results",onKeydown:t=>{const{key:i}=t;n.value.length&&(i==="Tab"?(d(),t.preventDefault()):(i==="ArrowDown"||i==="ArrowUp"||i==="Escape")&&t.preventDefault())},onInput:({target:t})=>{a.value=t.value,u.value=!0,p.value=0}}),a.value?o("button",{type:"reset",class:"search-pro-clear-button",innerHTML:q,onClick:()=>{a.value=""}}):null,O&&u.value&&n.value.length?o("ul",{class:"search-pro-suggestions",ref:S},n.value.map((t,i)=>o("li",{class:["search-pro-suggestion",{active:i===p.value}],onClick:()=>{d(i)}},[o("kbd",{class:"search-pro-auto-complete",title:`Tab ${r.value.autocomplete}`},"Tab"),t]))):null]),o("button",{type:"button",class:"search-pro-close-button",onClick:()=>{e.value=!1,a.value=""}},r.value.cancel)]),o(ue,{query:a.value,isFocusing:!u.value,onClose:()=>{e.value=!1},onUpdateQuery:t=>{a.value=t}}),l.value?null:o("div",{class:"search-pro-hints"},[o("span",{class:"search-pro-hint"},[o("kbd",{innerHTML:oe}),r.value.select]),o("span",{class:"search-pro-hint"},[o("kbd",{innerHTML:le}),o("kbd",{innerHTML:te}),r.value.navigate]),o("span",{class:"search-pro-hint"},[o("kbd",{innerHTML:re}),r.value.exit])])])]):null}}),ve=N({enhance({app:e}){J(e),e.component("SearchBox",ce)},setup(){se()},rootComponents:[ie]});export{ve as default};
//# sourceMappingURL=config.js.map
